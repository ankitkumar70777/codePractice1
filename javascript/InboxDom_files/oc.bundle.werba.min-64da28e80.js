var ocWerb={amazon:{pubID:"",adUnits:[],requested:!1},prebid:{bidderTimeout:0,bidderConfig:{},bidderSettings:{},adUnits:[],requested:!1},requests:{prebid:!1,aps:!1,adserver:!1},width:0,adUnits:[],responsiveBidders:[],adserverRequestSent:!1,prebidFailed:!1,bidderBack:function(){ocWerb.requests.prebid&&ocWerb.requests.aps&&ocWerb.sendToAdserver()},sendToAdserver:function(){!0!==ocWerb.requests.adserver&&(ocWerb.requests.adserver=!0,googletag.cmd.push(function(){googletag.pubads().refresh()}))},_log:function(e,i){try{window.qgLogger.error(e,i)}catch(r){}},build:function(){try{ocWerb.width=ocWerb._getBrowserWidth(),ocWerb._buildResponsiveAdTarget(),ocWerb._buildResponsiveBidders(),ocWerb._buildPb(),""!==ocWerb.amazon.pubID&&ocWerb._buildAms(),ocWerb._requestBids(),setTimeout(function(){ocWerb.sendToAdserver()},ocWerb.prebid.bidderTimeout)}catch(e){ocWerb.prebidFailed=!0,ocWerb.sendToAdserver(),ocWerb._log("ocWerb exception build",e)}},addAd:function(e,i,r){ocWerb.adUnits.push({div:i,name:e,supportedSizes:r,bidder:[]})},addBidder:function(e,i){ocWerb.adUnits[ocWerb._getAdUnitByDiv(e)].bidder.push(i)},addBidderResponsive:function(e,i){ocWerb.responsiveBidders.push({size:e,bidder:i})},_getAdUnitByDiv:function(e){for(var i=0;i<ocWerb.adUnits.length;++i)if(ocWerb.adUnits[i].div===e)return i},_getResponsiveBiddersBySize:function(e){for(var i=[],r=0;r<ocWerb.responsiveBidders.length;++r)ocWerb.responsiveBidders[r].size[0]===e[0]&&ocWerb.responsiveBidders[r].size[1]===e[1]&&i.push(ocWerb.responsiveBidders[r]);return i},_buildResponsiveBidders:function(){for(var e=0;e<ocWerb.adUnits.length;++e)for(var i=ocWerb._getResponsiveBiddersBySize(ocWerb.adUnits[e].target),r=0;r<i.length;++r)ocWerb.adUnits[e].bidder.push(i[r].bidder)},_buildPb:function(){ocWerb._buildPbAdUnits(),ocWerb._buildPbBidderSettings(),ocWerb._buildPbConfig(),"undefined"!=typeof pbjs&&(pbjs=pbjs||{},pbjs.que=pbjs.que||[],pbjs.bidderSettings=ocWerb.prebid.bidderSettings,pbjs.setConfig(ocWerb.prebid.bidderConfig))},_buildAms:function(){ocWerb._buildAmsAdUnits(),apstag.init({pubID:ocWerb.amazon.pubID,adServer:"googletag"})},_buildAmsAdUnits:function(){for(var e=0;e<ocWerb.adUnits.length;++e)ocWerb.amazon.adUnits.push({slotID:ocWerb.adUnits[e].div,sizes:ocWerb.adUnits[e].target,slotName:ocWerb.adUnits[e].name})},_requestBids:function(){""!==ocWerb.amazon.pubID?apstag.fetchBids({slots:ocWerb.amazon.adUnits,timeout:ocWerb.prebid.bidderTimeout},function(e){googletag.cmd.push(function(){apstag.setDisplayBids(),ocWerb.requests.aps=!0,ocWerb.bidderBack()})}):ocWerb.bidderBack(),pbjs.que.push(function(){pbjs.addAdUnits(ocWerb.prebid.adUnits),pbjs.requestBids({bidsBackHandler:function(){googletag.cmd.push(function(){pbjs.setTargetingForGPTAsync(),ocWerb.requests.prebid=!0,ocWerb.bidderBack()})}})})},setPbTimeout:function(e){ocWerb.prebid.bidderTimeout=e},setAmazonId:function(e){ocWerb.amazon.pubID=e},_buildPbAdUnits:function(){for(var e=0;e<ocWerb.adUnits.length;++e)ocWerb.prebid.adUnits.push({code:ocWerb.adUnits[e].div,mediaTypes:{banner:{sizes:ocWerb.adUnits[e].target}},bids:ocWerb.adUnits[e].bidder})},_buildPbConfig:function(){var e={buckets:[{precision:2,min:0,max:1,increment:.05},{precision:2,min:1,max:5,increment:.1},{precision:2,min:5,max:20,increment:.5}]};ocWerb.prebid.bidderConfig={enableSendAllBids:!0,userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:["openx"],filter:"include"}}},priceGranularity:e,bidderTimeout:ocWerb.prebid.bidderTimeout}},_buildPbBidderSettings:function(){ocWerb.prebid.bidderSettings={sovrn:{bidCpmAdjustment:function(e){return.88*e}},appnexus:{bidCpmAdjustment:function(e){return.88*e}},openx:{alwaysUseBid:!0}}},_buildResponsiveAdTarget:function(){for(var e=0;e<ocWerb.adUnits.length;++e){ocWerb.adUnits[e].target=0;for(var i=0;i<ocWerb.adUnits[e].supportedSizes.length;++i)ocWerb.width>=ocWerb.adUnits[e].supportedSizes[i][0][0]&&(Array.isArray(ocWerb.adUnits[e].supportedSizes[i][1][0])?ocWerb.adUnits[e].target<ocWerb.adUnits[e].supportedSizes[i][1][0][0]&&(ocWerb.adUnits[e].target=ocWerb.adUnits[e].supportedSizes[i][1][0]):ocWerb.adUnits[e].target<ocWerb.adUnits[e].supportedSizes[i][1][0]&&(ocWerb.adUnits[e].target=ocWerb.adUnits[e].supportedSizes[i][1]))}},_getBrowserWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||1e3}};